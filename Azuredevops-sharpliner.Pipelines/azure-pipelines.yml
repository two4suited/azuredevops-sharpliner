###
### DO NOT MODIFY THIS FILE!
###
### This YAML was auto-generated from DotNetBuildPipeline
### To make changes, change the C# definition and rebuild its project
###

stages:
- stage: Build
  displayName: Build and Test
  jobs:
  - job: BuildJob
    displayName: Build and Test .NET Application
    pool:
      name: ubuntu-latest
    steps:
    - checkout: self

    - task: DotNetCoreCLI@2
      displayName: Restore NuGet packages
      inputs:
        command: restore
        projects: '**/*.csproj'

    - task: DotNetCoreCLI@2
      displayName: Build solution
      inputs:
        command: build
        projects: '**/*.sln'
        arguments: --configuration Release --no-restore

    - task: DotNetCoreCLI@2
      displayName: Run unit tests
      inputs:
        command: test
        projects: '**/*Tests.csproj'
        arguments: --configuration Release --no-build --verbosity normal

- stage: Publish
  displayName: Publish Application
  jobs:
  - job: PublishJob
    displayName: Publish .NET Application
    pool:
      name: ubuntu-latest
    steps:
    - checkout: self

    - task: DotNetCoreCLI@2
      displayName: Restore NuGet packages
      inputs:
        command: restore
        projects: '**/*.csproj'

    - task: DotNetCoreCLI@2
      displayName: Build solution
      inputs:
        command: build
        projects: '**/*.sln'
        arguments: --configuration Release --no-restore

    - task: DotNetCoreCLI@2
      displayName: Publish application
      inputs:
        command: publish
        projects: '**/*.csproj'
        arguments: --configuration Release --no-build --output $(Build.ArtifactStagingDirectory)
